{% extends 'layout.html' %}

{% load tags %}

{% block title %}
    Rentals
{% endblock %}

{% block content %}
    <ol class="breadcrumb">
        <li>
            <a href="{% url 'depot:index' %}">Depots</a>
        </li>
        <li>
            <a href="{% url 'depot:detail' depot.id %}">{{ depot.name }}</a>
        </li>
        <li class="active">
            <span>Rentals</span>
        </li>
    </ol>

    <div class="page-header">
        <h1>
            Rentals <small>for {{ depot.name }}</small>
        </h1>
    </div>

    <div class="panel panel-default">
        <div class="table-responsive">
            <table class="table table-hover table-clickable">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>
                        <th>Number of items</th>
                        <th>Start date</th>
                        <th>Return date</th>
                        <th>State</th>
                    </tr>
                </thead>

                <tbody>
                    {% for rental in rentals %}
                        <tr class="row-clickable" data-href="{% url 'rental:detail' rental.uuid %}">
                            <th scope="row">{{ forloop.counter }}</th>
                            <td>{{ rental.firstname }} {{ rental.lastname }}</td>
                            <td>{{ rental.itemrental_set.all.count }}
                            <td>{{ rental.start_date }}</td>
                            <td>{{ rental.return_date }}</td>
                            <td>
                                <span class="label label-{% rental_state_class rental.state %}">
                                    {% rental_state rental.state %}
                                </span>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
